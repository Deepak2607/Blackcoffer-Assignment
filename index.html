<!DOCTYPE html>
<html>
	<head>
    <meta charset="utf-8">
    <title>ZingSoft Demo</title>
        <link rel="stylesheet" href="styles.css">
		<script src="https://cdn.zingchart.com/zingchart.min.js"></script>
		<script src="http://cdn.zingchart.com/modules/zingchart-grid.min.js"></script>
		<script src="myscripts.js"></script>
	</head>
	<body>
		<p><input id="share" type="button" value="Share" />

		  <script>
		    'use strict';

		    function sleep(delay) {
		      return new Promise(resolve => {
			setTimeout(resolve, delay);
		      });
		    }

		    function logText(message, isError) {
		      if (isError)
			console.error(message);
		      else
			console.log(message);

		      const p = document.createElement('p');
		      if (isError)
			p.setAttribute('class', 'error');
		      document.querySelector('#output').appendChild(p);
		      p.appendChild(document.createTextNode(message));
		    }

		    function logError(message) {
		      logText(message, true);
		    }

		    // function checkboxChanged(e) {
		    //   const checkbox = e.target;
		    //   const textfield = document.querySelector('#' + checkbox.id.split('_')[0]);

		    //   textfield.disabled = !checkbox.checked;
		    //   if (!checkbox.checked)
		    //     textfield.value = '';
		    // }

		    async function testWebShare() {
		      if (navigator.share === undefined) {
			logError('Error: Unsupported feature: navigator.share()');
			return;
		      }

		      try {
			await navigator.share({"image, "share", "share on any platform", ""});
			logText('Successfully sent share');
		      } catch (error) {
			logError('Error sharing: ' + error);
		      }
		    }

		    async function testWebShareDelay() {
		      await sleep(6000);
		      testWebShare();
		    }

		    function onLoad() {  
		      document.querySelector('#share').addEventListener('click', testWebShare);
		      if (navigator.share === undefined) {
			if (window.location.protocol === 'http:') {
			  window.location.replace(window.location.href.replace(/^http:/, 'https:'));
			} else {
			  logError('Error: You need to use a browser that supports this draft ' +
				   'proposal.');
			}
		      }
		    }

		    window.addEventListener('load', onLoad);
		  </script>
	</body>
</html>
